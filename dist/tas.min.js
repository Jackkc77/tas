(function(r,f){if(typeof define==='function'&&define.amd){define(function(){return f(r,r.document)})}else if(typeof exports==='object'){module.exports=r.document?f(r,r.document):function(w){return f(w,w.document)}}else{r.tas=f(r,r.document)}}(typeof window!=='undefined'?window:this,function(window,document){return function(n){function t(o){if(e[o])return e[o].exports;var i=e[o]={exports:{},id:o,loaded:!1};return n[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){!function(){arguments[0](e(1))}(function(t){n.exports=t})},function(n,t,e){!function(){arguments[0](e(2),e(29),e(9),e(19))}(function(t,e,o,i){var c={break:function(n){t.break(n)},abort:function(n){t.abort(n)}},r={await:function(){t.await([].slice.call(arguments))},next:function(){t.next([].slice.call(arguments))}},u={promise:function(){t.promise([].slice.call(arguments))},all:function(){t.all([].slice.call(arguments))},race:function(){t.race([].slice.call(arguments))},cancel:function(n){t.cancel(n)}};Object.defineProperty(t.entry,"layer",{get:function(){return o.get()}}),Object.defineProperty(t.entry,"maxLayer",{get:function(){return i.get()+1}}),n.exports=e.object.extend(t.entry,c,r,u)})},function(n,t,e){!function(){arguments[0](e(3),e(24),e(26),e(29))}(function(t,e,o,i){var c={entry:function(){c.do([].slice.call(arguments))},do:function(n){t.do(n)},break:function(n){t.break(n)},abort:function(n){t.abort(n)}},r={await:function(n){n.await=!0,c.do(n)},next:function(n){e.do(n)}},u={promise:function(n){u.convert(n,"promise")},all:function(n){u.convert(n,"all")},race:function(n){u.convert(n,"race")},convert:function(n,t){var e="",i={};({setDescribe:function(){return"string"==typeof n[0]&&(e=n.shift()),this},convertFuncToObj:function(){var t={};return n[0]instanceof Function&&(n.forEach(function(n,e){t["t"+(e+1)]=n}),n=[t]),this},packPromiseTask:function(){return i["Promise "+t]=function(){o[t](n[0])},this},applyToAwait:function(){var n=[i];return e&&n.unshift(e),r.await(n),this}}).setDescribe().convertFuncToObj().packPromiseTask().applyToAwait()},cancel:function(n){o.cancel(n)}};n.exports=i.object.extend(c,r,u)})},function(n,t,e){!function(){arguments[0](e(4))}(function(t){var e={do:function(n){t.do(n)},break:function(n){t.break(n)},abort:function(n){t.abort(n)}};n.exports=e})},function(n,t,e){!function(){arguments[0](e(5),e(10),e(22))}(function(t,e,o){var i={do:function(n){t.add(n),!o.isAbort.get()&&i.exec()},exec:function(){var n=t.getNextTasks();e.do(i,n)},break:function(n){n&&console.log(n),e.break()},abort:function(n){n&&console.log(n),o.isAbort.set()},getNextTasks:function(n){return t.getNextTasks(n)}};n.exports=i})},function(n,t,e){!function(){arguments[0](e(6),e(8))}(function(t,e){var o={add:function(n){var o,c=n.await;({saveDescribe:function(){return"string"==typeof n[0]&&(o=n.shift()),this},packFunctions:function(){if(n[0]instanceof Function){var t={};n.forEach(function(n,e){t["t"+(e+1)]=n}),n=[t]}return this},saveTasks:function(){return n.forEach(function(r,u){t.add(),r.name||(r.name=i.getObjName(o,n,t.get(),u)),c&&(r.await=!0),e.saveTasks(r)}),this}}).saveDescribe().packFunctions().saveTasks()},getNextTasks:function(n){return e.getNextTasks(n)}},i={getObjName:function(n,t,e,o){var i="";return i=n?n:"Tasks["+e+"]"}};n.exports=o})},function(n,t,e){!function(){arguments[0](e(7))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t){!function(){var t={value:0,get:function(){return this.value},add:function(){this.value++},sub:function(){this.value--},set:function(n){this.value=n},save:function(n){this.set(n)}};n.exports=t}()},function(n,t,e){!function(){arguments[0](e(9))}(function(t){var e={data:{},saveTasks:function(n){var e=t.get();n.layer=e,"undefined"==typeof this.data[e]&&(this.data[e]=[]),this.data[e].push(n)},getNextTasks:function(n){return this.data[n||t.get()].shift()}};n.exports=e})},function(n,t,e){!function(){arguments[0](e(7))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t,e){!function(){arguments[0](e(11),e(12),e(20),e(15),e(22))}(function(t,e,o,i,c){var r={tas:{},do:function(n,e){r.tas=n,t.add(e),r.exec(e.layer)},exec:function(n){o.do(r,n)},run:function(n){return e.do(n)},break:function(){i.isBreak.set()}};n.exports=r})},function(n,t){!function(){var t={},e={add:function(n){var e=n.layer;({initThisLayer:function(){return"undefined"==typeof t[e]&&(t[e]=[]),this},addFunctions:function(){return o.getFunctions(e,n,n,n.name,t[e]),this},setIndex:function(){return t[e].forEach(function(n,t){n.index=t}),this},setNext:function(){var n=t[e];return n.forEach(function(t,e){e!==n.length-1&&(t.next=n[e+1])}),this}}).initThisLayer().addFunctions().setIndex().setNext()},getNextFunc:function(n){return t[n].shift()},clearRemainFunctions:function(n){var e,o=n.root,i=t[n.layer];for(e=0;e<i.length;e++)i[e].root===o&&(i.splice(e,1),e--)}},o={getFunctions:function(n,t,e,i,c){Object.keys(e).forEach(function(r){var u=i+"."+r,a=e[r];"object"==typeof a&&o.getFunctions(n,t,a,u,c),"function"==typeof a&&(a.keyPath=u,a.name=r,a.parent=e,a.root=t,a.layer=n,c.push(a))})}};n.exports=e}()},function(n,t,e){!function(){arguments[0](e(13),e(15),e(9))}(function(t,e,o){var i={do:function(n){e.maxLayer.set(o.get()),o.add();var i=n.apply(n.root,t.getArguments());return i instanceof Array&&t.saveArguments(i),o.sub(),i}};n.exports=i})},function(n,t,e){!function(){arguments[0](e(14))}(function(t){var e=Object.create(t);e.saveArguments=e.set,e.getArguments=e.get,n.exports=e})},function(n,t){!function(){var t={data:[],get:function(){return this.data},set:function(n){this.data=n},pop:function(){return this.data.pop()},push:function(n){this.data.push(n)},shift:function(){return this.data.shift()},unshift:function(n){this.data.unshift(n)}};n.exports=t}()},function(n,t,e){n.exports={isGoNext:e(16),isBreak:e(18),maxLayer:e(19),reset:function(){this.isGoNext.reset(),this.isBreak.reset()}}},function(n,t,e){!function(){arguments[0](e(17))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t){!function(){var t=!1,e={value:t,get:function(){return this.value},set:function(n){"undefined"==typeof n&&(n=!t),this.value=n},reset:function(){this.set(t)}};n.exports=e}()},function(n,t,e){!function(){arguments[0](e(17))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t,e){!function(){arguments[0](e(7))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t,e){!function(){arguments[0](e(21),e(11),e(15),e(22))}(function(t,e,o,i){var c={do:function(n,c){var r,u,a;if(!t.isAbortTas()){for(;r=e.getNextFunc(c);){if(o.reset(),u=n.run(r),t.isAbortTas(u)){i.isAbort.set();break}if(t.isBreakCurrentTasks(u)){a=!0;break}if(t.isIgnoreThisFunc(u)&&o.isGoNext.set(),t.isAwaitInSyncFunc(u)){i.isAbort.set();break}if(!t.isSyncTasksFunc(r)&&!t.isGoNext()&&t.isAwaitTasksFunc(r)){i.isAbort.set();break}}a&&e.clearRemainFunctions(r)}}};n.exports=c})},function(n,t,e){!function(){arguments[0](e(15),e(22))}(function(t,e){var o={isAwaitTasksFunc:function(n){return n.root.await},isAwaitInSyncFunc:function(n){return"await"===n},isBreakCurrentTasks:function(n){return"break"===n||n===!1||t.isBreak.get()},isAbortTas:function(n){return"abort"===n||e.isAbort.get()},isIgnoreThisFunc:function(n){return"ignore"===n},isSyncTasksFunc:function(n){return!o.isAwaitTasksFunc(n)},isGoNext:function(){return t.isGoNext.get()}};n.exports=o})},function(n,t,e){!function(){arguments[0](e(23))}(function(t){n.exports={isAbort:t,reset:function(){t.reset()}}})},function(n,t,e){!function(){arguments[0](e(17))}(function(t){var e=Object.create(t);n.exports=e})},function(n,t,e){!function(){arguments[0](e(25),e(22),e(13),e(15))}(function(t,e,o,i){var c={do:function(n){o.saveArguments(n),i.isGoNext.set(),e.isAbort.get()&&c.resume()},resume:function(){t.do()}};n.exports=c})},function(n,t,e){!function(){arguments[0](e(22),e(4),e(9),e(10),e(15))}(function(t,e,o,i,c){var r={do:function(){({setState:function(){return t.isAbort.set(!1),this},handleTheTasks:function(){for(var n,r=c.maxLayer.get();r>=0;){for(o.set(r),i.exec(r);!t.isAbort.get()&&(n=e.getNextTasks(r));)t.reset(),i.do(e,n);r--}return this}}).setState().handleTheTasks()}};n.exports=r})},function(n,t,e){!function(){arguments[0](e(27),e(28),e(24))}(function(t,e,o){var i={promise:function(n){n.done=function(n,t){i.done([n,t])},i.exec(n)},all:function(n){t.do(n,i)},race:function(n){e.do(n,i)},exec:function(n){Object.defineProperty(n,"done",{enumerable:!1}),Object.keys(n).forEach(function(t){n[t]()})},done:function(n){o.do(n)},cancel:function(n){e.cancel(n)}};n.exports=i})},function(n,t){!function(){var t={do:function(n,t){var e=Object.keys(n).length,o=0,i=null,c=[];n.done=function(n,r){o++,n&&(i=n),c.push(r),o===e&&t.done([i,c])},t.exec(n)}};n.exports=t}()},function(n,t){!function(){var t={do:function(n,t){var e=0;n.done=function(n,o){1===++e&&t.done([n,o])},t.exec(n)},cancel:function(n){n&&n instanceof Array&&n.forEach(function(n){n.abort?"undefined"!=typeof XMLHttpRequest&&n instanceof XMLHttpRequest?n.readyState!==XMLHttpRequest.UNSENT&&n.abort():n.abort():clearTimeout(n)})}};n.exports=t}()},function(n,t,e){n.exports={object:e(30),string:e(31)}},function(n,t){!function(){var t={extend:function(){var n=[].slice.call(arguments),t=n.length>1?n.shift():{},e={do:function(n,t){Object.keys(t).forEach(function(e){"undefined"==typeof n[e]&&(n[e]=t[e])})}};return n.forEach(function(n){e.do(t,n)}),t}};n.exports=t}()},function(n,t){!function(){var t={repeat:function(n,t){return new Array(t+1).join(n)}};n.exports=t}()}]);}));